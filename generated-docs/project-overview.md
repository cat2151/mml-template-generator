Last updated: 2025-11-10

# Project Overview

## プロジェクト概要
- 最小限の入力（例: cde）から、各種MMLコンパイラで即座に演奏可能なMMLを生成します。
- MML入力の初心者でも、コンパイルエラーを気にせず手軽に音出しを体験できるようサポートします。
- Webブラウザ上で動作し、簡単な操作でMMLテンプレートを生成・出力する簡易ツールです。

## 技術スタック
- フロントエンド: HTML, JavaScript - Webブラウザ上で動作するユーザーインターフェースとロジックを実装しています。
- 音楽・オーディオ: MML (Music Macro Language) - 各種MMLコンパイラに対応した形式で音楽データを出力するためのロジックを内包しています。
- 開発ツール: 該当する技術はありません。
- テスト: 該当する技術はありません。
- ビルドツール: 該当する技術はありません。
- 言語機能: JavaScript - クライアントサイドの主要なプログラミング言語として使用されています。
- 自動化・CI/CD: 該当する技術はありません。
- 開発標準: 該当する技術はありません。

## ファイル階層ツリー
```
📄 LICENSE
📖 README.md
📜 app.js
📜 controller.js
📁 generated-docs/
🌐 index.html
📜 services.js
```

## ファイル詳細説明
- **app.js**: アプリケーションの初期化処理や、ごく基本的な設定を行うファイルです。現在のところ、直接的な関数定義や外部モジュールのインポートはありません。
- **controller.js**: ユーザーからの入力イベントを処理し、アプリケーションのコアロジック（services.js）を呼び出す役割を担うコントローラー層のファイルです。アプリケーションの振る舞いを制御します。
- **index.html**: WebアプリケーションのメインとなるHTMLファイルで、ユーザーインターフェースのレイアウトや表示要素を定義しています。アプリケーションのエントリーポイントとして機能します。
- **services.js**: プロジェクトの主要なビジネスロジック、特にMML（Music Macro Language）の生成処理を担うファイルです。ユーザー入力に基づき、各種MML形式のテンプレートを生成するための多数のヘルパー関数（例: `generate`, `genHead`, `gen1ch`, `genTail`など）が含まれています。

## 関数詳細説明
- **`controller`** (controller.js)
  - **役割**: ユーザーインターフェースからのイベント（テキスト入力、プルダウン選択など）を検知し、適切なMML生成処理を呼び出します。
  - **引数**: イベントオブジェクトなど、ユーザー操作に関する情報を受け取る可能性があります。
  - **戻り値**: なし（主にDOM操作やサービス関数の呼び出しを行います）。
  - **機能**: 入力されたノート情報に基づき、MMLテンプレート生成サービスを起動し、結果を画面に表示します。

- **`function`** (controller.js)
  - **役割**: `controller.js`内で定義されている補助的な関数、またはイベントハンドラとして利用される無名関数がキャプチャされたものです。
  - **引数**: 特定の処理に必要なデータを受け取る可能性があります。
  - **戻り値**: 処理結果を返したり、DOMを更新したりします。
  - **機能**: 特定のUI要素の状態に基づいてMML生成ロジックの呼び出しを調整したり、入力データの整形を行います。

- **`getMiddleText`** (services.js)
  - **役割**: 入力されたノート情報（例: "cde"）から、MMLの本体部分（曲のメロディ部分）を生成します。
  - **引数**: ユーザーが入力した音符の文字列（例: "cde"）。
  - **戻り値**: 生成されたMMLのメロディ部分の文字列。
  - **機能**: 入力文字列を一文字ずつ解析し、選択されたMMLフォーマットに応じた音符や休符、オクターブ、長さなどの情報を付加してMMLスニペットを生成します。

- **`sion`** (services.js)
  - **役割**: MMLの出力フォーマットの一つであるSion形式のMMLを生成します。
  - **引数**: 生成に必要なMMLデータや設定情報。
  - **戻り値**: Sion形式のMML文字列。
  - **機能**: 渡されたデータをもとにSion形式のMMLの構造（ヘッダ、ボディ、フッタなど）を組み立てます。

- **`sutoton`** (services.js)
  - **役割**: MMLの出力フォーマットの一つであるSutoton形式のMMLを生成します。
  - **引数**: 生成に必要なMMLデータや設定情報。
  - **戻り値**: Sutoton形式のMML文字列。
  - **機能**: 渡されたデータをもとにSutoton形式のMMLの構造（ヘッダ、ボディ、フッタなど）を組み立てます。

- **`auto`** (services.js)
  - **役割**: MMLの出力フォーマットの一つであるAuto形式のMMLを生成します。
  - **引数**: 生成に必要なMMLデータや設定情報。
  - **戻り値**: Auto形式のMML文字列。
  - **機能**: 渡されたデータをもとにAuto形式のMMLの構造（ヘッダ、ボディ、フッタなど）を組み立てます。

- **`generate`** (services.js)
  - **役割**: 指定されたMML形式に基づいて、MMLテンプレート全体を生成するメインの関数です。
  - **引数**: ユーザー入力（ノート情報）、選択されたMMLフォーマットの種類。
  - **戻り値**: 完成されたMMLテンプレート文字列。
  - **機能**: `getMiddleText`や各種MML形式ごとの関数（例: `sion`, `sutoton`, `auto`など）、`genHead`, `gen1ch`, `genTail`などを呼び出して、MML全体を構成します。

- **`genHead`** (services.js)
  - **役割**: 生成するMMLのヘッダー部分（開始設定など）を生成します。
  - **引数**: MML形式の種類や初期設定に関する情報。
  - **戻り値**: MMLヘッダー部分の文字列。
  - **機能**: 選択されたMMLフォーマットに応じた初期設定（例: テンポ、音量、楽器など）を定義するMMLコードを生成します。

- **`gen1ch`** (services.js)
  - **役割**: MMLの1チャンネル分のMMLコードを生成します。
  - **引数**: MML形式の種類、生成されたMMLのボディ部分（メロディ）。
  - **戻り値**: 1チャンネル分のMMLコード文字列。
  - **機能**: `getMiddleText`で生成されたメロディ部分を基に、指定されたMMLフォーマットの1チャンネル分のMMLコードをラップします。

- **`genTail`** (services.js)
  - **役割**: 生成するMMLのフッター部分（終了設定など）を生成します。
  - **引数**: MML形式の種類や最終設定に関する情報。
  - **戻り値**: MMLフッター部分の文字列。
  - **機能**: 選択されたMMLフォーマットに応じたMMLの終了処理や繰り返し設定などを定義するMMLコードを生成します。

- **`getABC`** (services.js)
  - **役割**: アルファベット表記の音符（例: cdefgab）をMMLで利用可能な数値または文字列表現に変換します。
  - **引数**: アルファベット表記の音符文字列。
  - **戻り値**: MMLに適した音符表現。
  - **機能**: 入力された音符を解析し、MMLコンパイラが解釈できる形式に変換します。

- **`service`** (services.js)
  - **役割**: `services.js`内で、アプリケーションのビジネスロジックを提供する役割を持つ汎用的な関数、またはモジュール全体を指す可能性があります。
  - **引数**: サービス実行に必要なデータやコンテキスト。
  - **戻り値**: 処理結果やMMLデータ。
  - **機能**: 主にMML生成に関わる多様な内部処理を統括し、外部からの呼び出しに応答します。

- **`bgm`** (services.js)
  - **役割**: 背景音楽（BGM）関連のMMLテンプレート、または特定のBGMパターンを生成する機能を提供します。
  - **引数**: BGMの生成に必要なパラメータ（例: 曲の長さ、パターン）。
  - **戻り値**: BGMとして機能するMML文字列。
  - **機能**: 標準的なMMLのBGMパターンやループ処理などを組み込んだMMLコードを生成します。

## 関数呼び出し階層ツリー
```
- if (services.js)
  - controller (controller.js)
    - function ()
      - getMiddleText ()
      - generate ()
      - sion ()
      - sutoton ()
      - auto ()
      - genHead ()
      - gen1ch ()
      - genTail ()
      - getABC ()
      - service ()
      - forEach ()
      - bgm ()

---
Generated at: 2025-11-10 08:35:22 JST
